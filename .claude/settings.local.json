{
  "permissions": {
    "allow": [
      "Bash(pnpm create:*)",
      "Bash(where npm:*)",
      "Bash(npm install:*)",
      "Bash(npm run dev:*)",
      "Bash(npm run build:*)",
      "Bash(where:*)",
      "Bash(vercel deploy:*)",
      "Bash(vercel login)",
      "Bash(winget install:*)",
      "Bash(dir /b)",
      "Bash(findstr:*)",
      "Bash(git commit:*)",
      "Bash(\"C:/Program Files/GitHub CLI/gh.exe\" auth login --web)",
      "Bash(\"C:/Program Files/GitHub CLI/gh.exe\" auth status)",
      "Bash(git add:*)",
      "Bash(git push)",
      "Bash(\"C:/Program Files/GitHub CLI/gh.exe\" api repos/GrayWei444/mist/pages -X POST -f build_type=workflow)",
      "Bash(\"C:/Program Files/GitHub CLI/gh.exe\" run list --repo GrayWei444/mist --limit 1)",
      "Bash(\"C:/Program Files/GitHub CLI/gh.exe\" run view 20066042796 --repo GrayWei444/mist --log-failed)",
      "Bash(timeout /t 30 /nobreak)",
      "Bash(dir /b \"c:\\Users\\wg444\\safetalk\\.claude\")",
      "Bash(node --version:*)",
      "Bash(claude mcp add --transport stdio hostinger-api -- npx -y hostinger-api-mcp)",
      "Bash(claude mcp add --transport stdio hostinger-api --env API_TOKEN=2BGI6UIwQKhC8pYZ6RTtaZxgQvLhAYVpmxildNEL5bd6e9ff -- npx -y hostinger-api-mcp)",
      "Bash(claude mcp remove:*)",
      "Bash(claude mcp add --transport stdio hostinger-api --env API_TOKEN=2BGI6UIwQKhC8pYZ6RTtaZxgQvLhAYVpmxildNEL5bd6e9ff -s local -- npx -y hostinger-api-mcp)",
      "Bash(claude mcp list:*)",
      "Bash(cargo check:*)",
      "Bash(wasm-pack build:*)",
      "Bash(cargo install:*)",
      "Bash(~/.cargo/bin/wasm-pack build:*)",
      "Bash(dir /b \"c:\\Users\\wg444\\safetalk\\rust-core\\pkg\")",
      "Bash(npx tsc --noEmit)",
      "Bash(\"C:/Program Files/GitHub CLI/gh.exe\" run list --repo GrayWei444/mist --limit 3)",
      "Bash(\"C:/Program Files/GitHub CLI/gh.exe\" run view 20089489471 --repo GrayWei444/mist --log-failed)",
      "Bash(dir:*)",
      "Bash(timeout /t 15 /nobreak)",
      "Bash(\"C:/Program Files/GitHub CLI/gh.exe\" run list --repo GrayWei444/mist --limit 2)",
      "Bash(del \"c:\\Users\\wg444\\safetalk\\src\\services\\simulatedPeer.ts\")",
      "Bash(timeout /t 3 /nobreak)",
      "Bash(git checkout:*)",
      "Bash(cat:*)",
      "Bash(git -C \"c:\\Users\\wg444\\safetalk\" status)",
      "Bash(git -C \"c:\\Users\\wg444\\safetalk\" diff --stat)",
      "Bash(git -C \"c:\\Users\\wg444\\safetalk\" log --oneline -5)",
      "Bash(git -C \"c:\\Users\\wg444\\safetalk\" add CLAUDE.md docs/ARCHITECTURE.md src/services/mqtt.ts src/services/webrtc.ts)",
      "Bash(git -C \"c:\\Users\\wg444\\safetalk\" commit -m \"$(cat <<''EOF''\nfeat(infra): Switch to self-hosted VPS for MQTT and optimize WebRTC\n\n- Update MQTT broker to wss://mqtt.alwaysbefound.com/mqtt\n- Optimize ICE server order: self-hosted STUN â†’ Google STUN â†’ TURN\n- Add connection type monitoring (host/srflx/relay)\n- Document VPS deployment info in CLAUDE.md and ARCHITECTURE.md\n- Update development roadmap progress\n\nVPS: 31.97.71.140 (Ubuntu 24.04 with Docker)\nServices: EMQX, Coturn, Caddy\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git -C \"c:\\Users\\wg444\\safetalk\" push)",
      "Bash(npx tsc:*)",
      "Bash(git -C \"c:\\Users\\wg444\\safetalk\" add src/pages/ChatApp.tsx)",
      "Bash(git -C \"c:\\Users\\wg444\\safetalk\" commit -m \"$(cat <<''EOF''\nfix(mqtt): Add X3DH_INIT listener for bidirectional friend addition\n\nWhen a peer scans our QR code and sends X3DH_INIT, we now:\n- Receive the message via MQTT subscription\n- Add the sender as a verified friend automatically\n- Log the friend addition for debugging\n\nThis fixes the issue where scanning a QR code only added the friend\non the scanner''s side, not the scanned side.\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git -C \"c:\\Users\\wg444\\safetalk\" commit -m \"$(cat <<''EOF''\nfix(mqtt): Improve X3DH_INIT listener with better debugging\n\n- Add debug logging for all received MQTT messages\n- Use useChatStore.getState() to avoid stale closure issues\n- Remove dependency array items that cause listener re-registration\n- Add mounted check to prevent memory leaks\n\nThis helps diagnose why friend addition is not working bidirectionally.\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git -C \"c:\\Users\\wg444\\safetalk\" add src/providers/AppProvider.tsx)",
      "Bash(git -C \"c:\\Users\\wg444\\safetalk\" commit -m \"$(cat <<''EOF''\nfix(mqtt): Use production broker instead of localhost\n\nChanged isDev from true to false in AppProvider.tsx to connect\nto wss://mqtt.alwaysbefound.com/mqtt instead of ws://localhost:8083/mqtt\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git -C \"c:\\Users\\wg444\\safetalk\" add src/services/mqtt.ts)",
      "Bash(git -C \"c:\\Users\\wg444\\safetalk\" commit -m \"$(cat <<''EOF''\nfix(mqtt): Use URL-safe Base64 for MQTT topic names\n\nBase64 characters + and / are special in MQTT topics:\n- / is the topic level separator\n- + is a single-level wildcard\n\nConvert public keys to URL-safe Base64 (replacing + with - and / with _)\nwhen using them in topic names to avoid \"Invalid topic\" errors.\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git -C \"c:\\Users\\wg444\\safetalk\" add src/main.tsx)",
      "Bash(git -C \"c:\\Users\\wg444\\safetalk\" commit -m \"$(cat <<''EOF''\nfix(pwa): Remove duplicate service worker registration\n\nVitePWA plugin already handles service worker registration automatically.\nThe manual registration was looking for /sw.js but the site base is /mist/,\ncausing a 404 error.\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git -C \"c:\\Users\\wg444\\safetalk\" commit -m \"$(cat <<''EOF''\nfeat(chat): Add global ENCRYPTED_MESSAGE listener for message reception\n\nPreviously, messages were only received when ChatRoom was mounted\n(i.e., when a specific chat was open). This caused messages to be\nmissed if the recipient hadn''t opened that chat.\n\nNow ChatApp.tsx listens for ENCRYPTED_MESSAGE globally, so messages\nare received and stored regardless of which chat is currently open.\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git -C \"c:\\Users\\wg444\\safetalk\" add src/services/storage.ts src/stores/chatStore.ts src/providers/AppProvider.tsx src/pages/ChatApp.tsx src/hooks/useChat.ts)",
      "Bash(git -C \"c:\\Users\\wg444\\safetalk\" commit -m \"$(cat <<''EOF''\nfeat(storage): Implement local message persistence with sql.js + IndexedDB\n\n- Add storage service using sql.js for SQLite in WASM\n- Store contacts, conversations, and messages locally\n- Integrate storage with chatStore for persistence\n- Load data from IndexedDB on app startup\n- Auto-save changes to IndexedDB every 5 seconds\n- Add cleanup task for expired messages\n\nThis follows the zero-knowledge architecture: all data stays on client,\nserver only handles signaling.\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(find:*)",
      "Bash(ls -la \"c:\\Users\\wg444\\Mist\\src\\components\\chat\"\" 2>/dev/null || echo \"Chat directory may not exist yet \")",
      "Bash(git commit -m \"$(cat <<''EOF''\nfeat(auth): Add user display name setup and improve QR code scanning\n\n- Add display name setup step after PIN registration in AuthScreen\n- Store user profile (displayName) in localStorage via chatStore\n- Use displayName in QR code data and X3DH init messages\n- Change QR code color from purple to black for better scanning success\n- Add PWA auto-refresh on service worker update (controllerchange)\n- Add FUTURE_ROADMAP.md documenting Mist + SafeTalk dual brand strategy\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git push:*)",
      "Bash(gh run list:*)",
      "Bash(gh run view:*)"
    ],
    "deny": [],
    "ask": []
  }
}
